using System.Collections.Generic;
using UnityEngine;
using UnityEngine.Events;

public class TutorialIndicatorCheck : MonoBehaviour
{
    private UnityEvent<TutorialIndicatorCheck> OnAllIndicatorsFilled = new();

    private List<PlacementIndicator> childIndicators = new List<PlacementIndicator>();

    private void Start()
    {
        // Get all child PlacementIndicator components
        childIndicators.AddRange(GetComponentsInChildren<PlacementIndicator>());

        // Subscribe to OnIndicatorFilled event for each child indicator
        foreach (var indicator in childIndicators)
        {
            indicator.OnIndicatorFilled.AddListener(OnChildIndicatorFilled);
        }
    }

    private void OnChildIndicatorFilled(PlacementIndicator indicator)
    {
        bool allIndicatorsFilled = true;
        foreach (var indicator in childIndicators)
        {
            if (indicator.currentState != PlacementIndicator.IndicatorState.Filled)
            {
                allIndicatorsFilled = false;
                break;
            }
        }
    }
}
